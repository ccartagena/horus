\section{Estructura del Toolbox}
\label{sec:horusdesign}

El sistema HORUS es un paquete con la estructura que se muestra en
la figura~\ref{fig:dir}.

\begin{figure}[htbp] \centering
  \includegraphics[width=1.0\linewidth]{img/dir}
  \caption{Esquema general del sistema de archivos de HORUS}
  \label{fig:dir}
\end{figure}

En el esquema se presentan todos los módulos del paquete que contiene
el sistema HORUS, los cuales se detallan a continuación:

\begin{itemize}
\item Módulo \emph{src}: Este módulo contiene las rutinas en MATLAB
  que llevan a cabo los procesos de HORUS, por ejemplo, rectificación,
  fusión, entre otros.

\item Módulo \emph{gui}: En este módulo se encuentran las interfaces
  de usuario, y se hace uso de las rutinas ubicadas en \emph{src} para
  la funcionalidad y de \emph{io} para la comunicación con las bases
  de datos.

\item Módulo \emph{data}: Contiene los datos de configuración del
  sistema y del usuario, tales como las rutas de las imágenes,
  configuraciones, entre otros. Los datos contenidos en este módulo
  sirven como insumo para la funcionalidad de algunas rutinas y deben
  estar muy bien estructurados para facilidad de lectura y
  manipulación.

\item Módulo \emph{doc}: Contiene los manuales técnicos y de usuario,
  así como archivos en diferentes formatos (html, pdf, entre otros)
  que explican la funcionalidad de submódulos o rutinas.

\item Módulo \emph{tmp}: Algunas rutinas requieren generar variables o
  archivos temporales, en este módulo se almacenan datos que pueden
  ser desechados posteriormente o no son vitales para el
  funcionamiento del sistema.

\item Módulo \emph{examples}: Este módulo es una extensión de la
  documentación donde se hacen demostraciones o ejemplos de alguna
  rutina, y datos de prueba.

\item Módulo \emph{ext data}: Este módulo representa la base de datos
  de imágenes \textit{snap}, \textit{timex}, \textit{var} o
  \textit{timestacks}, de las zonas de estudio, así como las series de
  tiempo, e información sobre la estación. La línea punteada del
  recuadro indica que no se encuentra dentro del paquete de HORUS,
  pero hay comunicación con este módulo.

\item Módulo \emph{io}: Este módulo contiene rutinas específicas para
  la comunicación con una base de datos. Es el puente entre el módulo
  \emph{src} y \emph{gui} con la base de datos.
\end{itemize}

En la figura~\ref{fig:communication} se muestra un diagrama de
comunicación entre los distintos módulos según lo explicado
anteriormente. El diseño del sistema está constituído por tres
capas. La capa de más bajo nivel es la información que se almacena en
una base de datos relacional, la siguiente capa es un intermedio entre
la aplicación y la base de datos, y está constituída por las funciones
que consultan e insertan información en la base de datos desde las
funciones de usuario. La capa de más alto nivel, es la que contiene
las funciones que el usuario utiliza y las interfaces gráficas.

\begin{figure}[htbp] \centering
  \includegraphics[width=0.5\linewidth]{img/communication}
  \caption{Diagrama de comunicación entre los módulos}
  \label{fig:communication}
\end{figure}

El sistema HORUS consta de tres componentes básicamente, la captura,
que es donde se toman las imágenes y son enviadas a un servidor
central, el procesamiento, en el cual se manipulan las imágenes y se
extrae información de ellas, y la visualización en la web.

Este manual se enfoca en cada una de las componentes de HORUS,
principalmente en la etapa de procesamiento donde los procesos más
importantes son la rectificación y la fusión.

